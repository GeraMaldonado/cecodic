import{_ as L,r as _,c as I,o as j,w as q,g as D,f as H,a as $,b as G,d as n,e as s,h as e,i as P,v as C,F as A,j as F,t as d,k as c,u as v,l as y,m as J,n as w,p as S,q as K,B as O,s as Q,x as V,P as W,y as X,z as Y}from"./index-CEF45DK4.js";const o=h=>(X("data-v-04d94029"),h=h(),Y(),h),Z={class:"filtros"},ee={class:"filtroInstitucion"},te=o(()=>e("p",null,"Institución: ",-1)),ae=o(()=>e("option",{value:"todas"},"Todas",-1)),ne=["value"],se={class:"contenedorFiltroFecha"},oe={class:"filtroFecha"},le=o(()=>e("p",null,"Ver por:",-1)),ie=o(()=>e("option",{value:"semana"},"Semana",-1)),ce=o(()=>e("option",{value:"mes"},"Mes",-1)),ue=[ie,ce],re={class:"navegacionFecha"},de={key:0,class:"tablaEventos"},_e=o(()=>e("th",null,"Título",-1)),ve=o(()=>e("th",null,"Institución",-1)),he=o(()=>e("th",null,"Resumen",-1)),me=o(()=>e("th",null,"Fecha y Hora",-1)),pe=o(()=>e("th",null,"Lugar",-1)),ge={key:0},fe={class:"columnaTitulo"},ke={class:"columnaInstitucion"},ye={class:"columnaResumen"},we={class:"columnaFecha"},Se=o(()=>e("br",null,null,-1)),be={class:"columnaLugar"},Me={key:0},b=9,Ee={__name:"TablaEventos",setup(h){const m=_("todas"),i=_("semana"),p=_([]),M=localStorage.getItem("credencial"),g=_([]),k=_(1),a=_(new Date),x=I(()=>{const r=new Set(p.value.map(l=>l.institucion));return Array.from(r)});j(async()=>{await u(),f()}),q([i,a],()=>{u()});const E=I(()=>{const r=(k.value-1)*b,l=r+b;return g.value.slice(r,l)}),B=async()=>{await u(),f()},f=()=>{m.value==="todas"?g.value=p.value:g.value=p.value.filter(r=>r.institucion===m.value)},T=async()=>{a.value=new Date(a.value.setDate(a.value.getDate()-7)),await u()},N=async()=>{a.value=new Date(a.value.setDate(a.value.getDate()+7)),await u()},R=async()=>{a.value=new Date(a.value.setMonth(a.value.getMonth()-1)),await u()},U=async()=>{a.value=new Date(a.value.setMonth(a.value.getMonth()+1)),await u()},u=async()=>{switch(i.value){case"semana":await D(p,$(a.value));break;case"mes":await D(p,H(a.value));break;default:return}f()};return(r,l)=>{const z=G("router-link");return n(),s("div",null,[e("div",Z,[e("div",ee,[te,P(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>m.value=t),onChange:f},[ae,(n(!0),s(A,null,F(x.value,t=>(n(),s("option",{key:t,value:t},d(t),9,ne))),128))],544),[[C,m.value]])]),e("div",se,[e("div",oe,[le,P(e("select",{"onUpdate:modelValue":l[1]||(l[1]=t=>i.value=t),onChange:B},ue,544),[[C,i.value]])])]),e("div",re,[i.value==="semana"?(n(),s("button",{key:0,onClick:T},"Semana Anterior")):c("",!0),i.value==="semana"?(n(),s("button",{key:1,onClick:N},"Semana Siguiente")):c("",!0),i.value==="mes"?(n(),s("button",{key:2,onClick:R},"Mes Anterior")):c("",!0),i.value==="mes"?(n(),s("button",{key:3,onClick:U},"Mes Siguiente")):c("",!0)])]),E.value.length>0?(n(),s("table",de,[e("thead",null,[e("tr",null,[_e,ve,he,me,pe,v(M)?(n(),s("th",ge,"Acciones")):c("",!0)])]),e("tbody",null,[(n(!0),s(A,null,F(E.value,t=>(n(),s("tr",{key:t.ideventos},[e("td",fe,[y(z,{to:{name:"evento-individual",params:{id:t.ideventos}}},{default:J(()=>[w(d(v(S)(t.titulo,60)),1)]),_:2},1032,["to"])]),e("td",ke,d(v(S)(t.institucion,30)),1),e("td",ye,d(v(S)(t.detalles,150)),1),e("td",we,[w(d(v(K)(t)),1),Se,w(d(t.hora.substring(0,5))+" hrs",1)]),e("td",be,d(t.lugar),1),v(M)?(n(),s("td",Me,[e("td",null,[y(O,{idEvento:t.ideventos},null,8,["idEvento"])]),e("td",null,[y(Q,{eventoId:t.ideventos},null,8,["eventoId"])])])):c("",!0)]))),128))])])):c("",!0),g.value.length>9?(n(),V(W,{key:1,totalElementos:g.value.length,elementosPorPagina:b,paginaActual:k.value,"onUpdate:paginaActual":l[2]||(l[2]=t=>k.value=t)},null,8,["totalElementos","paginaActual"])):c("",!0)])}}},Ie=L(Ee,[["__scopeId","data-v-04d94029"]]),Pe={__name:"EventosView",setup(h){return(m,i)=>(n(),V(Ie))}};export{Pe as default};
