import{_ as L,r as d,c as M,o as z,w as j,g as E,f as q,a as H,b as $,d as s,e as o,h as t,i as D,v as P,F as C,j as A,t as c,k as i,u as v,l as h,m as G,n as k,p as y,q as J,B as K,s as O,x as F,P as Q}from"./index-D7OqybL3.js";const W={class:"filtros"},X={class:"filtroInstitucion"},Y=["value"],Z={class:"filtrofechas"},ee={class:"contenedorFiltroFecha"},te={class:"filtroFecha"},ae={class:"navegacionFecha"},ne={key:0,class:"tablaEventos"},se={key:0},oe={class:"columnaTitulo"},le={class:"columnaInstitucion"},ie={class:"columnaResumen"},ue={class:"columnaFecha"},re={class:"columnaLugar"},ce={key:0},w=9,de={__name:"TablaEventos",setup(I){const m=d("todas"),l=d("semana"),g=d([]),b=localStorage.getItem("credencial"),p=d([]),f=d(1),n=d(new Date),V=M(()=>{const r=new Set(g.value.map(e=>e.institucion));return Array.from(r)});z(async()=>{await u(),_()}),j([l,n],()=>{u()});const S=M(()=>{const r=(f.value-1)*w,e=r+w;return p.value.slice(r,e)}),x=async()=>{await u(),_()},_=()=>{m.value==="todas"?p.value=g.value:p.value=g.value.filter(r=>r.institucion===m.value)},B=async()=>{n.value=new Date(n.value.setDate(n.value.getDate()-7)),await u()},N=async()=>{n.value=new Date(n.value.setDate(n.value.getDate()+7)),await u()},T=async()=>{n.value=new Date(n.value.setMonth(n.value.getMonth()-1)),await u()},R=async()=>{n.value=new Date(n.value.setMonth(n.value.getMonth()+1)),await u()},u=async()=>{switch(l.value){case"semana":await E(g,H(n.value));break;case"mes":await E(g,q(n.value));break;default:return}_()};return(r,e)=>{const U=$("router-link");return s(),o("div",null,[t("div",W,[t("div",X,[e[4]||(e[4]=t("p",null,"Institución: ",-1)),D(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),onChange:_},[e[3]||(e[3]=t("option",{value:"todas"},"Todas",-1)),(s(!0),o(C,null,A(V.value,a=>(s(),o("option",{key:a,value:a},c(a),9,Y))),128))],544),[[P,m.value]])]),t("div",Z,[t("div",ee,[t("div",te,[e[6]||(e[6]=t("p",null,"Ver por:",-1)),D(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),onChange:x},e[5]||(e[5]=[t("option",{value:"semana"},"Semana",-1),t("option",{value:"mes"},"Mes",-1)]),544),[[P,l.value]])])]),t("div",ae,[l.value==="semana"?(s(),o("button",{key:0,onClick:B},"Semana Anterior")):i("",!0),l.value==="semana"?(s(),o("button",{key:1,onClick:N},"Semana Siguiente")):i("",!0),l.value==="mes"?(s(),o("button",{key:2,onClick:T},"Mes Anterior")):i("",!0),l.value==="mes"?(s(),o("button",{key:3,onClick:R},"Mes Siguiente")):i("",!0)])])]),S.value.length>0?(s(),o("table",ne,[t("thead",null,[t("tr",null,[e[7]||(e[7]=t("th",null,"Nombre del evento",-1)),e[8]||(e[8]=t("th",null,"Institución",-1)),e[9]||(e[9]=t("th",null,"Resumen",-1)),e[10]||(e[10]=t("th",null,"Fecha y Hora",-1)),e[11]||(e[11]=t("th",null,"Lugar",-1)),v(b)?(s(),o("th",se,"Acciones")):i("",!0)])]),t("tbody",null,[(s(!0),o(C,null,A(S.value,a=>(s(),o("tr",{key:a.ideventos},[t("td",oe,[h(U,{to:{name:"evento-individual",params:{id:a.ideventos}}},{default:G(()=>[k(c(v(y)(a.titulo,60)),1)]),_:2},1032,["to"])]),t("td",le,c(v(y)(a.institucion,30)),1),t("td",ie,c(v(y)(a.detalles,100)),1),t("td",ue,[k(c(v(J)(a)),1),e[12]||(e[12]=t("br",null,null,-1)),k(c(a.hora.substring(0,5))+" hrs",1)]),t("td",re,c(a.lugar),1),v(b)?(s(),o("td",ce,[t("td",null,[h(K,{idEvento:a.ideventos},null,8,["idEvento"])]),t("td",null,[h(O,{eventoId:a.ideventos},null,8,["eventoId"])])])):i("",!0)]))),128))])])):i("",!0),p.value.length>9?(s(),F(Q,{key:1,totalElementos:p.value.length,elementosPorPagina:w,paginaActual:f.value,"onUpdate:paginaActual":e[2]||(e[2]=a=>f.value=a)},null,8,["totalElementos","paginaActual"])):i("",!0)])}}},ve=L(de,[["__scopeId","data-v-a5d68af3"]]),ge={__name:"EventosView",setup(I){return(m,l)=>(s(),F(ve))}};export{ge as default};
